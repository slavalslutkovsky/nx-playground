apiVersion: platform.yurikrupnik.com/v1alpha1
kind: Network
metadata:
  name: test-azure-network
  namespace: default
  labels:
    cloud.provider/azure: "true"
spec:
  parameters:
    region: eastus
    cidrBlock: "10.102.0.0/16"
    enableDnsSupport: true
    enableDnsHostnames: true
    tags:
      Environment: integration-test
      Team: platform

    subnets:
      public:
        count: 3
        cidrMask: 24
      private:
        count: 3
        cidrMask: 24
      database:
        enabled: true
        count: 2
        cidrMask: 24

    connectivity:
      natGateway:
        enabled: true
        highAvailability: false
      internetGateway:
        enabled: true

    security:
      defaultSecurityGroup:
        enabled: true
        allowInternalTraffic: true
        allowOutboundAll: true

    observability:
      networkWatcher:
        enabled: true

    clusterSecurity:
      privateClusterEndpoint: true
      podCidrBlock: "10.244.0.0/16"
      serviceCidrBlock: "10.96.0.0/12"
      networkPolicy: true

    azure:
      resourceGroup: integration-test-rg
      addressSpaces:
        - "10.103.0.0/16"
      bastionHost:
        enabled: false
        sku: Basic
      privateLink:
        enabled: true
        services:
          - Microsoft.Storage
          - Microsoft.Sql
